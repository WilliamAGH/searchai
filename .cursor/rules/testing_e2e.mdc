---
description: "End-to-End testing guidelines with Playwright"
globs: "tests/e2e/**/*.spec.ts"
alwaysApply: true
---

# Playwright E2E Testing

## üé≠ Configuration

```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test'

export default defineConfig({
  testDir: './tests/e2e',
  fullyParallel: true,
  use: {
    baseURL: 'http://localhost:5173',
    trace: 'on-first-retry',
    actionTimeout: 10000,
  },
  projects: [
    { name: 'chromium', use: { ...devices['Desktop Chrome'] } },
    { name: 'mobile', use: { ...devices['iPhone 13'] } },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
  },
})
```

## üìÑ Page Object Model (POM)

```typescript
// tests/e2e/pages/ChatPage.ts
import { Page, Locator, expect } from '@playwright/test'

export class ChatPage {
  readonly page: Page
  readonly messageInput: Locator
  readonly sendButton: Locator

  constructor(page: Page) {
    this.page = page
    this.messageInput = page.getByRole('textbox', { name: /type a message/i })
    this.sendButton = page.getByRole('button', { name: /send/i })
  }

  async goto() {
    await this.page.goto('/')
    await this.page.waitForLoadState('networkidle')
  }

  async sendMessage(message: string) {
    await this.messageInput.fill(message)
    await this.sendButton.click()
    await this.page.waitForSelector(`text="${message}"`)
  }
}
```

## üìù Test Example

```typescript
import { test, expect } from '@playwright/test'
import { ChatPage } from './pages/ChatPage'

test.describe('Chat Functionality', () => {
  test('user can send message', async ({ page }) => {
    const chatPage = new ChatPage(page)
    await chatPage.goto()
    await chatPage.sendMessage('Hello, AI!')
    await expect(page.getByText('Hello, AI!')).toBeVisible()
  })
})
```

## üîç Debugging Playwright

```bash
# Debug mode
npx playwright test --debug

# UI Mode
npx playwright test --ui

# Codegen
npx playwright codegen localhost:5173
```
