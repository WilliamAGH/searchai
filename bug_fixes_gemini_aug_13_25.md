# Bug Fixes and Code Audit - August 13, 2025 (Gemini)

This document tracks the comprehensive audit of the `searchai-io` repository to identify bugs, neglected code, and DRY violations. Each identified issue is assigned a unique task ID.

## Audit Checklist & Findings

| Task ID | File Path                                                                                               | Issue Description                                                                                                                                                                   | Status |
| ------- | ------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| GEM-001 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | `generateResponse` uses polling instead of real-time subscriptions                                                                                                                  | Open   |
| GEM-002 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | Generic error handling in `generateResponse`                                                                                                                                        | Open   |
| GEM-003 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | `importData` is not fully implemented                                                                                                                                               | Open   |
| GEM-004 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | Unsafe type casting with `as` in `convexToUnifiedChat` and `convexToUnifiedMessage`                                                                                                 | Open   |
| GEM-005 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | `getChatById` can be simplified                                                                                                                                                     | Open   |
| GEM-006 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | Unused imports may exist                                                                                                                                                            | Open   |
| GEM-007 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | `addMessage` and `updateMessage` are not implemented                                                                                                                                | Open   |
| GEM-008 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | DRY violation in `convexToUnifiedChat` and `convexToUnifiedMessage`                                                                                                                 | Open   |
| GEM-009 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/repositories/ConvexChatRepository.ts    | DRY violation in error handling                                                                                                                                                     | Open   |
| GEM-010 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Overly complex state management                                                                                                                                                     | Open   |
| GEM-011 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `sendRefTemp` is a hack                                                                                                                                                             | Open   |
| GEM-012 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `useEffect` hooks have large dependency arrays                                                                                                                                      | Open   |
| GEM-013 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Prop drilling                                                                                                                                                                       | Open   |
| GEM-014 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Inefficient and unsafe `allChats` mapping                                                                                                                                           | Open   |
| GEM-015 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Unauthenticated response generation logic is duplicated                                                                                                                             | Open   |
| GEM-016 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `handleNewChat` has a potential race condition                                                                                                                                      | Open   |
| GEM-017 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `optimisticChat` is always null                                                                                                                                                     | Open   |
| GEM-018 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `_onRequestSignIn` is not used                                                                                                                                                      | Open   |
| GEM-019 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Commented out code should be removed                                                                                                                                                | Open   |
| GEM-020 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `useAutoCreateFirstChat` hook is called twice                                                                                                                                       | Open   |
| GEM-021 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | Sidebar rendering logic is duplicated                                                                                                                                               | Open   |
| GEM-022 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatInterface.tsx                | `useComponentProps` hook is too large                                                                                                                                               | Open   |
| GEM-023 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useChatNavigation.ts                  | `navigateWithVerification` may not work for newly created chats                                                                                                                     | Open   |
| GEM-024 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useChatNavigation.ts                  | `isAuthenticated` prop is not used                                                                                                                                                  | Open   |
| GEM-025 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | `requestAnimationFrame` in `handleKeyDown` is not reliable                                                                                                                          | Open   |
| GEM-026 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | Auto-focus logic is complex and can be simplified                                                                                                                                   | Open   |
| GEM-027 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | Leftover comments about removed code                                                                                                                                                | Open   |
| GEM-028 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | Multiple `useEffect` hooks with empty dependency arrays                                                                                                                             | Open   |
| GEM-029 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | DRY violation in `requestAnimationFrame` calls                                                                                                                                      | Open   |
| GEM-030 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/MessageInput.tsx                 | DRY violation in `adjustTextarea` calls                                                                                                                                             | Open   |
| GEM-031 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ShareModalContainer.tsx          | Most props are not used                                                                                                                                                             | Open   |
| GEM-032 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ShareModalContainer.tsx          | Component is not fully implemented                                                                                                                                                  | Open   |
| GEM-033 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ShareModalContainer.tsx          | Props have `unknown` type                                                                                                                                                           | Open   |
| GEM-034 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatControls.tsx                 | Component is empty and renders nothing                                                                                                                                              | Open   |
| GEM-035 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatControls.tsx                 | Component is not fully implemented                                                                                                                                                  | Open   |
| GEM-036 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/components/ChatControls.tsx                 | `_props` variable is not used                                                                                                                                                       | Open   |
| GEM-037 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useComponentProps.ts                  | `currentChat?.isLocal` is not a stable dependency                                                                                                                                   | Open   |
| GEM-038 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useComponentProps.ts                  | DRY violation in `chatSidebarProps` and `mobileSidebarProps`                                                                                                                        | Open   |
| GEM-039 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useComponentProps.ts                  | DRY violation in `onDeleteChat` logic                                                                                                                                               | Open   |
| GEM-040 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | Overly complex state management                                                                                                                                                     | Open   |
| GEM-041 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | `setState` calls are not atomic                                                                                                                                                     | Open   |
| GEM-042 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | `useEffect` hooks have large dependency arrays                                                                                                                                      | Open   |
| GEM-043 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | Inconsistent error handling                                                                                                                                                         | Open   |
| GEM-044 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | Potential memory leak in `handleRequestDeleteChat` and `handleRequestDeleteMessage`                                                                                                 | Open   |
| GEM-045 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | `ChatActions` interface is too large                                                                                                                                                | Open   |
| GEM-046 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | `clearLocalStorage` is not SSR-safe                                                                                                                                                 | Open   |
| GEM-047 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | DRY violation in `setState` calls                                                                                                                                                   | Open   |
| GEM-048 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | DRY violation in error handling                                                                                                                                                     | Open   |
| GEM-049 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | DRY violation in title generation                                                                                                                                                   | Open   |
| GEM-050 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUnifiedChat.ts                     | DRY violation in `deleteChat` and `deleteMessage` logic                                                                                                                             | Open   |
| GEM-051 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useMessageHandler.ts                  | `activeChatId` is not always a string                                                                                                                                               | Open   |
| GEM-052 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useMessageHandler.ts                  | Unused props: `planSearch`, `isTopicChange`, `lastPlannerCallAtByChat`, `setLastPlannerCallAtByChat`, `setPendingMessage`, `resetFollowUp`, `onRequestSignUp`, `showFollowUpPrompt` | Open   |
| GEM-053 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useMessageHandler.ts                  | The `deps` object is very large and contains a lot of unused props                                                                                                                  | Open   |
| GEM-054 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDeletionHandlers.ts                | `setTimeout` can cause a memory leak                                                                                                                                                | Open   |
| GEM-055 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDeletionHandlers.ts                | Inconsistent undo timeout                                                                                                                                                           | Open   |
| GEM-056 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDeletionHandlers.ts                | `setUndoBanner` doesn't clear the message                                                                                                                                           | Open   |
| GEM-057 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDeletionHandlers.ts                | DRY violation in `setTimeout` logic                                                                                                                                                 | Open   |
| GEM-058 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDeletionHandlers.ts                | DRY violation in `setUndoBanner` calls                                                                                                                                              | Open   |
| GEM-059 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useAutoCreateFirstChat.ts             | `isCreatingInitialChat` is not reactive                                                                                                                                             | Open   |
| GEM-060 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useAutoCreateFirstChat.ts             | `chats.length` is not an ideal dependency                                                                                                                                           | Open   |
| GEM-061 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useAutoCreateFirstChat.ts             | `isAuthenticated` prop is not used                                                                                                                                                  | Open   |
| GEM-062 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/e2e/utils/react-click.ts                  | `clickReactElement` alias should be removed                                                                                                                                         | Open   |
| GEM-063 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/messageMapper.ts                  | `_isAuthenticated` is used inconsistently                                                                                                                                           | Open   |
| GEM-064 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/messageMapper.ts                  | `searchResults` and `sources` props have `unknown` type                                                                                                                             | Open   |
| GEM-065 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/ChatCreationService.ts         | `generateChatId` is not robust and can cause collisions                                                                                                                             | Open   |
| GEM-066 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/ChatCreationService.ts         | `createChat` has a potential race condition                                                                                                                                         | Open   |
| GEM-067 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/playwright-integration.config.ts                | `webServer` is disabled in CI                                                                                                                                                       | Open   |
| GEM-068 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/playwright-integration.config.ts                | DRY violation in `viewport` configuration                                                                                                                                           | Open   |
| GEM-069 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useSidebarTiming.ts                   | `setTimeout` can cause a memory leak                                                                                                                                                | Open   |
| GEM-070 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useSidebarTiming.ts                   | `isClosing` is not reactive                                                                                                                                                         | Open   |
| GEM-071 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useSidebarTiming.ts                   | `sidebarOpen` prop is not used                                                                                                                                                      | Open   |
| GEM-072 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUrlStateSync.ts                    | Unnecessary navigation to `/`                                                                                                                                                       | Open   |
| GEM-073 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useUrlStateSync.ts                    | `isAuthenticated` prop is not used                                                                                                                                                  | Open   |
| GEM-074 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/race-condition-fix.test.ts    | Hardcoded timeouts should be avoided                                                                                                                                                | Open   |
| GEM-075 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/race-condition-fix.test.ts    | `data-testid` selectors should be replaced with user-facing selectors                                                                                                               | Open   |
| GEM-076 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/race-condition-fix.test.ts    | DRY violation in `messageInput` locator                                                                                                                                             | Open   |
| GEM-077 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/race-condition-fix.test.ts    | DRY violation in chat ID verification                                                                                                                                               | Open   |
| GEM-078 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | `useEffect` dependency on `chatState?.messages` is inefficient                                                                                                                      | Open   |
| GEM-079 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | `sendRef.current` can be null                                                                                                                                                       | Open   |
| GEM-080 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | `summarizeRecentAction` is not type-safe                                                                                                                                            | Open   |
| GEM-081 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | Unused props: `recordClientMetric`, `isAuthenticated`                                                                                                                               | Open   |
| GEM-082 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | `generateFollowUpSuggestions` is a simple implementation                                                                                                                            | Open   |
| GEM-083 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useEnhancedFollowUpPrompt.ts          | DRY violation in `resetFollowUp` calls                                                                                                                                              | Open   |
| GEM-084 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/package.json                                    | Redundant test scripts: `test:vitest`, `test:playwright`                                                                                                                            | Open   |
| GEM-085 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/package.json                                    | Unused test script: `test:smoke:proxy`                                                                                                                                              | Open   |
| GEM-086 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/package.json                                    | DRY violation in `typecheck` script                                                                                                                                                 | Open   |
| GEM-087 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/package.json                                    | DRY violation in `lint` and `lint:fix` scripts                                                                                                                                      | Open   |
| GEM-088 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/title-generation.test.ts                  | `TitleUtils.sanitize` test is not comprehensive                                                                                                                                     | Open   |
| GEM-089 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/title-generation.test.ts                  | `Authentication Parity` test is not useful                                                                                                                                          | Open   |
| GEM-090 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/url-extraction.test.ts                    | `extracts from markdown/ports/intl/quotes/parentheses` test is too complex                                                                                                          | Open   |
| GEM-091 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/url-extraction.test.ts                    | `handles subdomains and ignores invalid domains` test has a weak assertion                                                                                                          | Open   |
| GEM-092 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useKeyboardShortcuts.ts               | `handleNewChatButton` and `startNewChatSession` are identical                                                                                                                       | Open   |
| GEM-093 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | `extractUrlsFromMessage` regex is not perfect                                                                                                                                       | Open   |
| GEM-094 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | `shouldPrioritizeUrl` can throw an error                                                                                                                                            | Open   |
| GEM-095 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | Hardcoded values in `creatorEnhancement`                                                                                                                                            | Open   |
| GEM-096 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | `technicalDocsEnhancement` is not very smart                                                                                                                                        | Open   |
| GEM-097 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | DRY violation in `enhanceQuery` in `technicalDocsEnhancement`                                                                                                                       | Open   |
| GEM-098 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/enhancements.ts                          | DRY violation in `matcher` functions                                                                                                                                                | Open   |
| GEM-099 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/UnauthenticatedAIService.ts    | `onChunk` is not type-safe                                                                                                                                                          | Open   |
| GEM-100 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/UnauthenticatedAIService.ts    | `searchResults` and `chatHistory` are not type-safe                                                                                                                                 | Open   |
| GEM-101 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/UnauthenticatedAIService.ts    | Error handling in `generateResponse` is not robust                                                                                                                                  | Open   |
| GEM-102 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/services/UnauthenticatedAIService.ts    | DRY violation in `fetch` calls                                                                                                                                                      | Open   |
| GEM-103 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/types/unified.ts                        | `toConvexChatId` and `toConvexMessageId` are unsafe                                                                                                                                 | Open   |
| GEM-104 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/types/unified.ts                        | `generateLocalId` is not robust                                                                                                                                                     | Open   |
| GEM-105 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/types/unified.ts                        | `sanitize` function is not comprehensive                                                                                                                                            | Open   |
| GEM-106 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/types/unified.ts                        | Unused interfaces: `Operation`, `MigrationResult`                                                                                                                                   | Open   |
| GEM-107 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/types/unified.ts                        | Commented out code in `StorageUtils.getStorageType`                                                                                                                                 | Open   |
| GEM-108 | /.env.example                                                                                           | Unused feature flag: `VITE_FEATURE_RACE_CONDITION_FIX`                                                                                                                              | Open   |
| GEM-109 | /.env.example                                                                                           | Unused feature flag: `VITE_FEATURE_TELEMETRY_ENABLED`                                                                                                                               | Open   |
| GEM-110 | /.env.example                                                                                           | Unused feature flag: `VITE_FEATURE_ENHANCED_FOLLOWUP`                                                                                                                               | Open   |
| GEM-111 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/verify-title-generation.test.ts           | `generateTitle` function is defined in the test file                                                                                                                                | Open   |
| GEM-112 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/verify-title-generation.test.ts           | `maintains parity between auth and unauth variants` test is not useful                                                                                                              | Open   |
| GEM-113 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/new-chat.test.ts                          | Most of the tests are not testing any real functionality                                                                                                                            | Open   |
| GEM-114 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration-title-auth.test.ts            | Tests are not testing any real functionality                                                                                                                                        | Open   |
| GEM-115 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/currentChat-derivation.test.ts            | `deriveCurrentChat` function is defined in the test file                                                                                                                            | Open   |
| GEM-116 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/chat-links.test.ts                        | `buildHumanShareUrl` and `buildLlmTxtUrl` functions are imported from another file                                                                                                  | Open   |
| GEM-117 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/chatHistory.ts                    | `messages` prop is not type-safe                                                                                                                                                    | Open   |
| GEM-118 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/httpUtils.ts                      | `fetchJsonWithRetry` can throw a null error                                                                                                                                         | Open   |
| GEM-119 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useConvexQueries.ts                   | `chatByOpaqueId` query is not correct                                                                                                                                               | Open   |
| GEM-120 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useConvexQueries.ts                   | `currentChatId` prop is not used                                                                                                                                                    | Open   |
| GEM-121 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/vitest.config.ts                                | `coverage` is disabled                                                                                                                                                              | Open   |
| GEM-122 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/vitest.config.ts                                | `tests/**/*.spec.ts` is excluded                                                                                                                                                    | Open   |
| GEM-123 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/App.tsx                                     | `useEffect` in `ChatPage` directly manipulates the DOM                                                                                                                              | Open   |
| GEM-124 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/App.tsx                                     | `hasManuallyToggled` state is never reset                                                                                                                                           | Open   |
| GEM-125 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/App.tsx                                     | `toastIcons` should be moved to a separate file                                                                                                                                     | Open   |
| GEM-126 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/App.tsx                                     | DRY violation in `ChatPage` rendering                                                                                                                                               | Open   |
| GEM-127 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/styles/mobile-sidebar-fix.css               | Empty file with a placeholder comment                                                                                                                                               | Open   |
| GEM-128 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/topicDetection.ts                 | `isTopicChange` is a simple heuristic and not very accurate                                                                                                                         | Open   |
| GEM-129 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useServices.ts                        | `convexUrl` is optional but the service will fail if it is not provided                                                                                                             | Open   |
| GEM-130 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useMetaTags.ts                        | Direct DOM manipulation                                                                                                                                                             | Open   |
| GEM-131 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useMetaTags.ts                        | DRY violation in meta tag creation                                                                                                                                                  | Open   |
| GEM-132 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useIsMobile.ts                        | `typeof window !== "undefined"` check is duplicated                                                                                                                                 | Open   |
| GEM-133 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/hooks/useDraftAnalyzer.ts                   | `extractTopics` and `detectSentiment` are simple implementations                                                                                                                    | Open   |
| GEM-134 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/enhancements.test.ts                      | `respects priority ordering` test is not robust                                                                                                                                     | Open   |
| GEM-135 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/enhancements.test.ts                      | `prioritizes expected URLs for creator queries` test is not robust                                                                                                                  | Open   |
| GEM-136 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/scripts/check-convex-imports.cjs                | `try...catch` block is too broad                                                                                                                                                    | Open   |
| GEM-137 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/scripts/check-convex-imports.cjs                | `process.exit(0)` in `catch` block is misleading                                                                                                                                    | Open   |
| GEM-138 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/chatValidation.ts                 | DRY violation in `messages.length > 0` check                                                                                                                                        | Open   |
| GEM-139 | /.husky/\_/husky.sh                                                                                     | Deprecated script                                                                                                                                                                   | Open   |
| GEM-136 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/creator-detection.test.ts                 | `detectCreatorQuery` function is defined in the test file                                                                                                                           | Open   |
| GEM-137 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/creator-detection.test.ts                 | `enhances creator queries with William Callahan's info (simulated)` test is not useful                                                                                              | Open   |
| GEM-138 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/convex.search.test.ts                     | `searchWithDuckDuckGo` test is not comprehensive                                                                                                                                    | Open   |
| GEM-139 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/convex.search.test.ts                     | Tests are testing private functions                                                                                                                                                 | Open   |
| GEM-140 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | DRY violation in `searchWeb` error handling                                                                                                                                         | Open   |
| GEM-141 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Hardcoded `relevanceScore` in `searchWeb` fallback                                                                                                                                  | Open   |
| GEM-142 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Unsafe type casting `(chat as any)` in `planSearch`                                                                                                                                 | Open   |
| GEM-143 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Empty `catch` block in `planSearch`                                                                                                                                                 | Open   |
| GEM-144 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Complex `shouldUseLLM` logic in `planSearch`                                                                                                                                        | Open   |
| GEM-145 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Unsafe parsing of LLM response in `planSearch`                                                                                                                                      | Open   |
| GEM-146 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Unsafe property access on `plan` object in `planSearch`                                                                                                                             | Open   |
| GEM-147 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | DRY violation in `setCachedPlan` calls in `planSearch`                                                                                                                              | Open   |
| GEM-148 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Broad `try...catch` block in `recordMetric`                                                                                                                                         | Open   |
| GEM-149 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Re-exporting test utilities from production code                                                                                                                                    | Open   |
| GEM-150 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | `planSearch` function is too long and complex                                                                                                                                       | Open   |
| GEM-151 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/search.ts                                | Architectural issues with metrics recording (TS2589)                                                                                                                                | Open   |
| GEM-152 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | `VITE_TELEMETRY_ENABLED` flag is not in `.env.example`                                                                                                                              | Open   |
| GEM-153 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | `generateSessionId` is not robust                                                                                                                                                   | Open   |
| GEM-154 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | Potential memory leak in `flush`                                                                                                                                                    | Open   |
| GEM-155 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | `destroy` method doesn't clear `beforeunload` event listener                                                                                                                        | Open   |
| GEM-156 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | Hardcoded flush interval and event count                                                                                                                                            | Open   |
| GEM-157 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | No batching support for `fetch`                                                                                                                                                     | Open   |
| GEM-158 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/telemetry.ts                            | The file is not used                                                                                                                                                                | Open   |
| GEM-159 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/chat-message-chaining.test.ts | Use of `data-testid` selectors                                                                                                                                                      | Open   |
| GEM-160 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/chat-message-chaining.test.ts | Use of `waitForTimeout`                                                                                                                                                             | Open   |
| GEM-161 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/chat-message-chaining.test.ts | Hardcoded test data                                                                                                                                                                 | Open   |
| GEM-162 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/chat-message-chaining.test.ts | Lack of assertions for message content                                                                                                                                              | Open   |
| GEM-163 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/tests/integration/chat-message-chaining.test.ts | The test "should recover from network failure" is not robust                                                                                                                        | Open   |
| GEM-164 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | `addMessage` does not handle `userId` being null                                                                                                                                    | Open   |
| GEM-165 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | DRY violation in `addMessage` and `updateMessage` arguments                                                                                                                         | Open   |
| GEM-166 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | Silent failures in `internalUpdateMessageContent`, `internalUpdateMessageReasoning`, and `updateMessageMetadata`                                                                    | Open   |
| GEM-167 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | `updateMessage` is an internalMutation but it's not used anywhere                                                                                                                   | Open   |
| GEM-168 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | `deleteMessage` has a broad `try...catch` for scheduler and patch                                                                                                                   | Open   |
| GEM-169 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | `addMessageWithTransaction` is an `internalMutation` but it's not used anywhere                                                                                                     | Open   |
| GEM-170 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | Title generation in `addMessageWithTransaction` is simplistic                                                                                                                       | Open   |
| GEM-171 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | `addMessageWithTransaction` has a broad `try...catch` block                                                                                                                         | Open   |
| GEM-172 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/messages.ts                              | The `role` in `addMessage` doesn't include `"system"` but the schema might allow it                                                                                                 | Open   |
| GEM-173 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | `generateStreamingResponse` uses `addMessageWithTransaction` which is not used anywhere else                                                                                        | Open   |
| GEM-174 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | Hardcoded values in `generationStep`                                                                                                                                                | Open   |
| GEM-175 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | Complex query augmentation logic in `generationStep`                                                                                                                                | Open   |
| GEM-176 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | Unsafe property access in `buildSystemPrompt`                                                                                                                                       | Open   |
| GEM-177 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | `streamResponseToMessage` uses `any` for `messageId`                                                                                                                                | Open   |
| GEM-178 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | `@ts-ignore` in `streamResponseToMessage`                                                                                                                                           | Open   |
| GEM-179 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | Hardcoded model and parameters in `streamResponseToMessage`                                                                                                                         | Open   |
| GEM-180 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | `generationStep` is too long and complex                                                                                                                                            | Open   |
| GEM-181 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | Error handling in `generateStreamingResponse` could be improved                                                                                                                     | Open   |
| GEM-182 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/generation/pipeline.ts                   | `console.log` and `console.error` used for logging                                                                                                                                  | Open   |
| GEM-183 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | Unsafe type casting in `POST /api/publishChat`                                                                                                                                      | Open   |
| GEM-184 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | `@ts-ignore` in `POST /api/publishChat`                                                                                                                                             | Open   |
| GEM-185 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | Unsafe type casting in `GET /api/exportChat`                                                                                                                                        | Open   |
| GEM-186 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | DRY violation in `GET /api/exportChat` and `GET /api/chatTextMarkdown`                                                                                                              | Open   |
| GEM-187 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | Hardcoded `Access-Control-Max-Age`                                                                                                                                                  | Open   |
| GEM-188 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | Inconsistent error responses                                                                                                                                                        | Open   |
| GEM-189 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | `getAllowedOrigin` can be simplified                                                                                                                                                | Open   |
| GEM-190 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | Unsafe use of `publicId!`                                                                                                                                                           | Open   |
| GEM-191 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | `formatConversationMarkdown` is called with `any`                                                                                                                                   | Open   |
| GEM-192 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/convex/http/routes/publish.ts                   | The `chatTextMarkdown` CORS is `*`                                                                                                                                                  | Open   |
| GEM-193 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/**tests**/chatValidation.test.ts  | The tests are using hardcoded values                                                                                                                                                | Open   |
| GEM-194 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/**tests**/chatValidation.test.ts  | The tests are not comprehensive                                                                                                                                                     | Open   |
| GEM-195 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/utils/**tests**/chatValidation.test.ts  | The types for the arguments of `validateChatContext` are not explicitly defined in the test                                                                                         | Open   |
| GEM-196 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/config/featureFlags.ts                  | The environment variable prefix `VITE_FF_` is not documented                                                                                                                        | Open   |
| GEM-197 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/config/featureFlags.ts                  | The `userId` based rollout is simplistic                                                                                                                                            | Open   |
| GEM-198 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/config/featureFlags.ts                  | The `DEFAULT_FEATURE_FLAGS` is imported from `unified.ts` but it is not defined there                                                                                               | Open   |
| GEM-199 | /Users/williamcallahan/Developer/git/hybrid/searchai-io/src/lib/config/featureFlags.ts                  | The function `isFeatureEnabled` is not used anywhere in the project                                                                                                                 | Open   |
